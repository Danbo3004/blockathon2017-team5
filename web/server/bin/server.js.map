{"version":3,"sources":["webpack:///server.js","webpack:///webpack/bootstrap d3b5c54652bc6f0cdd8f","webpack:///external \"react\"","webpack:///external \"react-redux\"","webpack:///external \"react-bootstrap\"","webpack:///external \"express\"","webpack:///external \"redux\"","webpack:///external \"react-qr-reader\"","webpack:///./routes/index.js","webpack:///./routes/ssr.js","webpack:///external \"react-dom/server\"","webpack:///external \"react-router\"","webpack:///../client/src/reducers/index.js","webpack:///../client/src/reducers/balance.js","webpack:///../client/src/reducers/contract.js","webpack:///../client/src/app.js","webpack:///external \"react-router-dom\"","webpack:///../client/src/containers/FrontPage.js","webpack:///external \"qrcode.react\"","webpack:///../client/src/containers/Redeem.js","webpack:///../client/src/containers/Topup.js","webpack:///../client/src/containers/Exchange.js","webpack:///external \"path\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","require","_interopRequireDefault","obj","default","_express","_express2","_ssr","_ssr2","app","set","use","static","req","res","status","render","listen","console","log","NODE_ENV","PORT","ADDRESS","undefined","value","_react","_react2","_server","_server2","_redux","_reactRedux","_reactRouter","_index","_index2","_app","_app2","router","Router","store","createStore","dispatch","type","address","context","html","renderToString","createElement","Provider","StaticRouter","location","originalUrl","onServer","finalState","getState","url","writeHead","Location","end","script","JSON","stringify","_balance","_balance2","_contract","_contract2","rootReducer","combineReducers","balance","contract","_extends","assign","target","arguments","length","source","key","state","tokens","action","payload","_asyncToGenerator","fn","gen","apply","this","Promise","resolve","reject","step","arg","info","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_reactRouterDom","_reactBootstrap","_FrontPage","_FrontPage2","_Redeem","_Redeem2","_Topup","_Topup2","_Exchange","_Exchange2","App","_React$Component","_this","getPrototypeOf","handleSelect","bind","activeKey","nextProps","pathname","setState","_this2","web3Provider","web3","currentProvider","Web3","providers","HttpProvider","window","fetch","method","headers","Headers","mode","cache","json","_ref","regeneratorRuntime","mark","_callee","loyaltyContract","wrap","_context","prev","next","TruffleContract","setProvider","at","sent","assignContract","setInterval","merchantGetToken","data","eth","getAccounts","accounts","getBalance","result","amount","fromWei","toNumber","updateBalance","parseInt","settings","defaultAccount","catch","stop","_x","selectedKey","history","push","src","style","padding","Nav","bsStyle","onSelect","display","NavItem","eventKey","float","Switch","Route","exact","path","component","Component","mapStateToProps","mapDispatchToProps","withRouter","connect","_reactQrReader","_reactQrReader2","_qrcode","_qrcode2","FrontPage","handleError","handleScan","token","scanningId","generatedId","uids","pwds","split","forEach","element","index","paddingLeft","paddingRight","fontSize","paddingTop","FormGroup","controlId","ControlLabel","FormControl","placeholder","onChange","e","replace","Grid","Row","position","Col","md","xs","textAlign","delay","onError","onScan","width","margin","paddingBottom","Button","onClick","updateUser","from","to","left","height","borderLeft","marginTop","marginBottom","size","password","createUser","Math","round","random","logs","args","uid","updateTokens","Redeem","isProcessing","useToken","gas","message","_this3","Topup","sendTransaction","toWei","transactionHash","Exchange","merchantRedeemToken"],"mappings":"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","file":"./server.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react\");\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react-redux\");\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react-bootstrap\");\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"express\");\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"redux\");\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react-qr-reader\");\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(7);\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _express = __webpack_require__(3);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _ssr = __webpack_require__(8);\n\nvar _ssr2 = _interopRequireDefault(_ssr);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar app = (0, _express2.default)();\n\napp.set('view engine', 'ejs');\n\napp.use(_express2.default.static('public'));\n\napp.use('/merchant*', _ssr2.default);\n\napp.get('/', function (req, res) {\n  res.status(200).render('../views/home.ejs');\n});\n\napp.listen(3005 || 3000, function () {\n  console.log(Object({\"NODE_ENV\":\"production\",\"PORT\":3005,\"ADDRESS\":undefined}));\n  console.log('Hello World listening on port ' + (3005 || 3000) + '!');\n});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _express = __webpack_require__(3);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _server = __webpack_require__(9);\n\nvar _server2 = _interopRequireDefault(_server);\n\nvar _redux = __webpack_require__(4);\n\nvar _reactRedux = __webpack_require__(1);\n\nvar _reactRouter = __webpack_require__(10);\n\nvar _index = __webpack_require__(11);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _app = __webpack_require__(14);\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar path = __webpack_require__(21);\n\nvar router = _express2.default.Router();\n\nrouter.get('*', function (req, res) {\n  /*\n    http://redux.js.org/docs/recipes/ServerRendering.html\n  */\n  var store = (0, _redux.createStore)(_index2.default);\n\n  store.dispatch({ type: 'ASSIGN_ADDRESS', address: undefined });\n\n  var context = {};\n\n  var html = _server2.default.renderToString(_react2.default.createElement(\n    _reactRedux.Provider,\n    { store: store },\n    _react2.default.createElement(\n      _reactRouter.StaticRouter,\n      {\n        location: req.originalUrl,\n        context: context\n      },\n      _react2.default.createElement(_app2.default, { onServer: true })\n    )\n  ));\n\n  var finalState = store.getState();\n\n  if (context.url) {\n    res.writeHead(301, {\n      Location: context.url\n    });\n    res.end();\n  } else {\n    res.status(200).render('../views/index.ejs', {\n      html: html,\n      script: JSON.stringify(finalState)\n    });\n  }\n});\n\nexports.default = router;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react-dom/server\");\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react-router\");\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _redux = __webpack_require__(4);\n\nvar _balance = __webpack_require__(12);\n\nvar _balance2 = _interopRequireDefault(_balance);\n\nvar _contract = __webpack_require__(13);\n\nvar _contract2 = _interopRequireDefault(_contract);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar rootReducer = (0, _redux.combineReducers)({\n  balance: _balance2.default,\n  contract: _contract2.default\n});\n\nexports.default = rootReducer;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar balance = function balance() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { balance: 0, tokens: 0 };\n  var action = arguments[1];\n\n  switch (action.type) {\n    case 'UPDATE_BALANCE':\n      return _extends({}, action.payload);\n    default:\n      return state;\n  }\n};\n\nexports.default = balance;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar balance = function balance() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { contract: {}, address: '' };\n  var action = arguments[1];\n\n  switch (action.type) {\n    case 'ASSIGN_CONTRACT':\n      return _extends({}, state, { contract: action.contract });\n      break;\n    case 'ASSIGN_ADDRESS':\n      return _extends({}, state, { address: action.address });\n      break;\n    default:\n      return state;\n  }\n};\n\nexports.default = balance;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(1);\n\nvar _reactRouterDom = __webpack_require__(15);\n\nvar _reactBootstrap = __webpack_require__(2);\n\nvar _FrontPage = __webpack_require__(16);\n\nvar _FrontPage2 = _interopRequireDefault(_FrontPage);\n\nvar _Redeem = __webpack_require__(18);\n\nvar _Redeem2 = _interopRequireDefault(_Redeem);\n\nvar _Topup = __webpack_require__(19);\n\nvar _Topup2 = _interopRequireDefault(_Topup);\n\nvar _Exchange = __webpack_require__(20);\n\nvar _Exchange2 = _interopRequireDefault(_Exchange);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar App = function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    _classCallCheck(this, App);\n\n    var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\n    _this.handleSelect = _this.handleSelect.bind(_this);\n    _this.state = {\n      activeKey: 1\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      switch (nextProps.location.pathname) {\n        case '/merchant':\n          this.setState({ activeKey: 1 });\n          break;\n        case '/merchant/exchange':\n          this.setState({ activeKey: 2 });\n          break;\n        case '/merchant/redeem':\n          this.setState({ activeKey: 3 });\n          break;\n        case '/merchant/topup':\n          this.setState({ activeKey: 4 });\n          break;\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var web3Provider = void 0;\n      if (typeof web3 !== 'undefined') {\n        web3Provider = web3.currentProvider;\n      } else {\n        // If no injected web3 instance is detected, fallback to the tesstRPC\n        web3Provider = new Web3.providers.HttpProvider('https://rinkeby.infura.io/NLQOqKfqFUx5isRRyS4k');\n      }\n\n      window.web3 = new Web3(web3Provider);\n\n      fetch('/Loyalty.json', {\n        method: 'GET',\n        headers: new Headers(),\n        mode: 'cors',\n        cache: 'default'\n      }).then(function (res) {\n        return res.json();\n      }).then(function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(json) {\n          var contract, loyaltyContract;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  contract = TruffleContract(json);\n\n                  contract.setProvider(web3Provider);\n                  _context.next = 4;\n                  return contract.at(_this2.props.contract.address);\n\n                case 4:\n                  loyaltyContract = _context.sent;\n\n                  _this2.props.assignContract(loyaltyContract);\n                  setInterval(function () {\n                    loyaltyContract.merchantGetToken().then(function (data) {\n                      window.web3.eth.getAccounts(function (error, accounts) {\n                        if (error) console.log(error);\n                        window.web3.eth.getBalance(accounts[0], function (err, result) {\n                          if (!err) {\n                            var amount = web3.fromWei(result.toNumber(), \"ether\");\n                            _this2.props.updateBalance({ balance: amount, tokens: parseInt(data) });\n                            if (!window.web3.settings.defaultAccount) window.web3.settings.defaultAccount = accounts[0];\n                          }\n                        });\n                      });\n                    }).catch(function (err) {\n                      return console.log(err);\n                    });\n                  }, 1000);\n\n                case 7:\n                case 'end':\n                  return _context.stop();\n              }\n            }\n          }, _callee, _this2);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: 'handleSelect',\n    value: function handleSelect(selectedKey) {\n      this.setState({ activeKey: selectedKey });\n      switch (selectedKey) {\n        case 1:\n          this.props.history.push('/merchant');\n          break;\n        case 2:\n          this.props.history.push('/merchant/exchange');\n          break;\n        case 3:\n          this.props.history.push('/merchant/redeem');\n          break;\n        case 4:\n          this.props.history.push('/merchant/topup');\n          break;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement('img', { src: '/image/banner.png' }),\n        _react2.default.createElement(\n          'div',\n          { style: { padding: '100px 50px' } },\n          _react2.default.createElement(\n            _reactBootstrap.Nav,\n            { bsStyle: 'pills', activeKey: this.state.activeKey, onSelect: this.handleSelect, style: { display: 'inline-block' } },\n            _react2.default.createElement(\n              _reactBootstrap.NavItem,\n              { eventKey: 1 },\n              'Issue Nekoins to User'\n            ),\n            _react2.default.createElement(\n              _reactBootstrap.NavItem,\n              { eventKey: 3 },\n              'User Redeem'\n            )\n          ),\n          _react2.default.createElement(\n            _reactBootstrap.Nav,\n            { bsStyle: 'pills', activeKey: this.state.activeKey, onSelect: this.handleSelect, style: { float: 'right' } },\n            _react2.default.createElement(\n              _reactBootstrap.NavItem,\n              { eventKey: 4 },\n              'Topup Nekoins'\n            ),\n            _react2.default.createElement(\n              _reactBootstrap.NavItem,\n              { eventKey: 2 },\n              'Exchange to Ethers'\n            )\n          ),\n          _react2.default.createElement(\n            _reactRouterDom.Switch,\n            null,\n            _react2.default.createElement(_reactRouterDom.Route, { exact: true, path: '/merchant', component: _FrontPage2.default }),\n            _react2.default.createElement(_reactRouterDom.Route, { path: '/merchant/exchange', component: _Exchange2.default }),\n            _react2.default.createElement(_reactRouterDom.Route, { path: '/merchant/redeem', component: _Redeem2.default }),\n            _react2.default.createElement(_reactRouterDom.Route, { path: '/merchant/topup', component: _Topup2.default })\n          )\n        )\n      );\n    }\n  }]);\n\n  return App;\n}(_react2.default.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return _extends({}, state);\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    assignContract: function assignContract(contract) {\n      return dispatch({ type: 'ASSIGN_CONTRACT', contract: contract });\n    },\n    updateBalance: function updateBalance(payload) {\n      return dispatch({ type: 'UPDATE_BALANCE', payload: payload });\n    }\n  };\n};\n\nexports.default = (0, _reactRouterDom.withRouter)((0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(App));\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"react-router-dom\");\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(1);\n\nvar _reactBootstrap = __webpack_require__(2);\n\nvar _reactQrReader = __webpack_require__(5);\n\nvar _reactQrReader2 = _interopRequireDefault(_reactQrReader);\n\nvar _qrcode = __webpack_require__(17);\n\nvar _qrcode2 = _interopRequireDefault(_qrcode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FrontPage = function (_React$Component) {\n  _inherits(FrontPage, _React$Component);\n\n  function FrontPage(props) {\n    _classCallCheck(this, FrontPage);\n\n    var _this = _possibleConstructorReturn(this, (FrontPage.__proto__ || Object.getPrototypeOf(FrontPage)).call(this, props));\n\n    _this.handleError = _this.handleError.bind(_this);\n    _this.handleScan = _this.handleScan.bind(_this);\n    _this.state = {\n      token: '',\n      scanningId: '',\n      generatedId: ''\n    };\n    return _this;\n  }\n\n  _createClass(FrontPage, [{\n    key: 'handleError',\n    value: function handleError(err) {\n      console.log(err);\n    }\n  }, {\n    key: 'handleScan',\n    value: function handleScan(data) {\n      if (!data) return;\n      var uids = [],\n          pwds = [];\n      data.split(',').forEach(function (element, index) {\n        if (index % 2 === 0) uids.push(parseInt(element));else pwds.push(parseInt(element));\n      });\n      this.setState({ scanningId: uids[0] });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        'div',\n        { style: { paddingLeft: 50, paddingRight: 50 } },\n        _react2.default.createElement(\n          'h1',\n          { style: { fontSize: 30, paddingTop: 50 } },\n          'You currently have ',\n          this.props.balance.tokens,\n          ' Nekoins'\n        ),\n        _react2.default.createElement(\n          'form',\n          { style: { padding: 20 } },\n          _react2.default.createElement(\n            _reactBootstrap.FormGroup,\n            { controlId: 'token' },\n            _react2.default.createElement(\n              _reactBootstrap.ControlLabel,\n              null,\n              'Nekoins as Gift offered to Customers'\n            ),\n            _react2.default.createElement(_reactBootstrap.FormControl, {\n              type: 'phone',\n              placeholder: 'Nekoins',\n              style: { fontSize: '2em' },\n              value: this.state.token,\n              onChange: function onChange(e) {\n                return _this2.setState({ token: e.target.value.replace(/\\D/g, '') });\n              } })\n          )\n        ),\n        _react2.default.createElement(\n          _reactBootstrap.Grid,\n          null,\n          _react2.default.createElement(\n            _reactBootstrap.Row,\n            { style: { position: 'relative' } },\n            _react2.default.createElement(\n              _reactBootstrap.Col,\n              { md: 6, xs: 6, style: { textAlign: 'center' } },\n              _react2.default.createElement(\n                'h3',\n                null,\n                'Return customer'\n              ),\n              _react2.default.createElement(_reactQrReader2.default, {\n                delay: 300,\n                onError: this.handleError,\n                onScan: this.handleScan,\n                style: { width: '80%', margin: 'auto' }\n              }),\n              _react2.default.createElement(\n                'div',\n                { style: { paddingTop: 10, paddingBottom: 10 } },\n                'User ID: ',\n                this.state.scanningId\n              ),\n              _react2.default.createElement(\n                _reactBootstrap.Button,\n                { onClick: function onClick() {\n                    _this2.props.contract.updateUser(_this2.state.scanningId, parseInt(_this2.state.token), {\n                      from: window.web3.settings.defaultAccount,\n                      to: _this2.props.contract.address\n                    }).then(function (data) {\n                      console.log(data);\n                    });\n                  } },\n                'Send ',\n                '' + this.state.token,\n                ' Nekoins to this account'\n              )\n            ),\n            _react2.default.createElement(\n              'div',\n              { style: { position: 'absolute', left: '50%', height: '100%', paddingTop: 100, paddingBottom: 50 } },\n              _react2.default.createElement('div', { style: { height: 150, borderLeft: 'dashed 2px black', width: 1 } }),\n              _react2.default.createElement(\n                'div',\n                { style: { marginTop: 20, marginBottom: 20 } },\n                _react2.default.createElement(\n                  'div',\n                  { style: { position: 'relative', left: -5 } },\n                  'Or'\n                )\n              ),\n              _react2.default.createElement('div', { style: { height: 150, borderLeft: 'dashed 2px black', width: 1 } })\n            ),\n            _react2.default.createElement(\n              _reactBootstrap.Col,\n              { md: 6, xs: 6, style: { textAlign: 'center' } },\n              _react2.default.createElement(\n                'h3',\n                null,\n                'Create new customer'\n              ),\n              this.state.generatedId ? _react2.default.createElement(_qrcode2.default, { value: '' + this.state.generatedId, size: 444 }) : _react2.default.createElement('div', { style: { width: 444, height: 444 } }),\n              _react2.default.createElement(_reactBootstrap.FormControl, {\n                type: 'password',\n                placeholder: 'Customer\\'s password',\n                onChange: function onChange(e) {\n                  return _this2.setState({ password: e.target.value });\n                },\n                style: { marginBottom: 10, margin: '0px 20px' }\n              }),\n              _react2.default.createElement(\n                _reactBootstrap.Button,\n                { onClick: function onClick() {\n                    _this2.props.contract.createUser(parseInt(_this2.state.token), parseInt(_this2.state.password), Math.round(Math.random() * 100000), {\n                      from: window.web3.settings.defaultAccount,\n                      to: _this2.props.contract.address\n                    }).then(function (data) {\n                      console.log(parseInt(data.logs[0].args.uid));\n                      _this2.setState({ generatedId: parseInt(data.logs[0].args.uid) });\n                    });\n                  } },\n                'Create new customer with ',\n                '' + this.state.token,\n                ' Nekoins'\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return FrontPage;\n}(_react2.default.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateTokens: function updateTokens(tokens) {\n      return dispatch({ type: 'UPDATE_TOKENS', tokens: tokens });\n    }\n  };\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(FrontPage);\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"qrcode.react\");\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(1);\n\nvar _reactBootstrap = __webpack_require__(2);\n\nvar _reactQrReader = __webpack_require__(5);\n\nvar _reactQrReader2 = _interopRequireDefault(_reactQrReader);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Redeem = function (_React$Component) {\n  _inherits(Redeem, _React$Component);\n\n  function Redeem(props) {\n    _classCallCheck(this, Redeem);\n\n    var _this = _possibleConstructorReturn(this, (Redeem.__proto__ || Object.getPrototypeOf(Redeem)).call(this, props));\n\n    _this.handleError = _this.handleError.bind(_this);\n    _this.handleScan = _this.handleScan.bind(_this);\n    _this.state = {\n      isProcessing: false,\n      token: ''\n    };\n    return _this;\n  }\n\n  _createClass(Redeem, [{\n    key: 'handleError',\n    value: function handleError(err) {\n      console.log(err);\n    }\n  }, {\n    key: 'handleScan',\n    value: function handleScan(data) {\n      var _this2 = this;\n\n      console.log(data, this.state.isProcessing);\n      if (this.state.isProcessing || !data) return;\n      this.setState({ isProcessing: true });\n      var uids = [],\n          pwds = [];\n      data.split(',').forEach(function (element, index) {\n        if (index % 2 === 0) uids.push(parseInt(element));else pwds.push(parseInt(element));\n      });\n      this.props.contract.useToken(uids, pwds, parseInt(this.state.token), {\n        from: window.web3.settings.defaultAccount,\n        to: this.props.contract.address,\n        gas: 300000\n      }).then(function (data) {\n        _this2.setState({ isProcessing: false });\n      }).catch(function (err) {\n        console.log(err.message);\n        _this2.setState({ isProcessing: false });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          'h1',\n          { style: { fontSize: 30, paddingTop: 50 } },\n          'You currently have ',\n          this.props.balance.tokens,\n          ' Nekoins'\n        ),\n        _react2.default.createElement(\n          'form',\n          { style: { padding: 20 } },\n          _react2.default.createElement(\n            _reactBootstrap.FormGroup,\n            { controlId: 'token' },\n            _react2.default.createElement(\n              _reactBootstrap.ControlLabel,\n              null,\n              'Redeem Gift Code From User'\n            ),\n            _react2.default.createElement(_reactBootstrap.FormControl, {\n              type: 'text',\n              placeholder: 'Nekoins Value',\n              value: this.state.token,\n              onChange: function onChange(e) {\n                return _this3.setState({ token: e.target.value.replace(/\\D/g, '') });\n              }\n            })\n          )\n        ),\n        _react2.default.createElement(_reactQrReader2.default, {\n          delay: 300,\n          onError: this.handleError,\n          onScan: this.handleScan,\n          style: { width: '40%', margin: 'auto' }\n        })\n      );\n    }\n  }]);\n\n  return Redeem;\n}(_react2.default.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateTokens: function updateTokens(tokens) {\n      return dispatch({ type: 'UPDATE_TOKENS', tokens: tokens });\n    }\n  };\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Redeem);\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(1);\n\nvar _reactBootstrap = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Topup = function (_React$Component) {\n  _inherits(Topup, _React$Component);\n\n  function Topup(props) {\n    _classCallCheck(this, Topup);\n\n    var _this = _possibleConstructorReturn(this, (Topup.__proto__ || Object.getPrototypeOf(Topup)).call(this, props));\n\n    _this.state = {\n      token: ''\n    };\n    return _this;\n  }\n\n  _createClass(Topup, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          'h1',\n          { style: { fontSize: 30, paddingTop: 50 } },\n          'You currently have ',\n          this.props.balance.tokens,\n          ' Nekoins'\n        ),\n        _react2.default.createElement(\n          'form',\n          { style: { padding: 20 } },\n          _react2.default.createElement(\n            _reactBootstrap.FormGroup,\n            { controlId: 'token' },\n            _react2.default.createElement(\n              _reactBootstrap.ControlLabel,\n              null,\n              'Buy Nekoins for your Loyalty Program'\n            ),\n            _react2.default.createElement(_reactBootstrap.FormControl, {\n              type: 'text',\n              placeholder: 'Nekoins',\n              value: this.state.token,\n              onChange: function onChange(e) {\n                return _this2.setState({ token: e.target.value.replace(/\\D/g, '') });\n              },\n              style: { fontSize: '2em' }\n            })\n          ),\n          _react2.default.createElement(\n            _reactBootstrap.Button,\n            { onClick: function onClick() {\n                window.web3.eth.sendTransaction({ to: _this2.props.contract.address, value: window.web3.toWei(_this2.state.token / 10000, \"ether\") }, function (err, transactionHash) {\n                  console.log(transactionHash);\n                });\n              } },\n            'Buy Now!'\n          )\n        )\n      );\n    }\n  }]);\n\n  return Topup;\n}(_react2.default.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateTokens: function updateTokens(tokens) {\n      return dispatch({ type: 'UPDATE_TOKENS', tokens: tokens });\n    }\n  };\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Topup);\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(1);\n\nvar _reactBootstrap = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Exchange = function (_React$Component) {\n  _inherits(Exchange, _React$Component);\n\n  function Exchange(props) {\n    _classCallCheck(this, Exchange);\n\n    var _this = _possibleConstructorReturn(this, (Exchange.__proto__ || Object.getPrototypeOf(Exchange)).call(this, props));\n\n    _this.state = {\n      token: ''\n    };\n    return _this;\n  }\n\n  _createClass(Exchange, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          'h1',\n          { style: { fontSize: 30, paddingTop: 50 } },\n          'You currently have ',\n          this.props.balance.tokens,\n          ' Nekoins'\n        ),\n        _react2.default.createElement(\n          'form',\n          { style: { padding: 20 } },\n          _react2.default.createElement(\n            _reactBootstrap.FormGroup,\n            { controlId: 'token' },\n            _react2.default.createElement(\n              _reactBootstrap.ControlLabel,\n              null,\n              'Nekoins to exchange'\n            ),\n            _react2.default.createElement(_reactBootstrap.FormControl, {\n              type: 'text',\n              placeholder: 'Nekoins',\n              value: this.state.token,\n              onChange: function onChange(e) {\n                return _this2.setState({ token: e.target.value.replace(/\\D/g, '') });\n              },\n              style: { fontSize: '2em' }\n            })\n          ),\n          _react2.default.createElement(\n            _reactBootstrap.Button,\n            { onClick: function onClick() {\n                _this2.props.contract.merchantRedeemToken(_this2.state.token, {\n                  from: window.web3.settings.defaultAccount,\n                  to: _this2.props.contract.address,\n                  gas: 300000\n                }).then(function (data) {\n                  console.log(data);\n                }).catch(function (err) {\n                  return console.log(err);\n                });\n              } },\n            'Exchange'\n          )\n        )\n      );\n    }\n  }]);\n\n  return Exchange;\n}(_react2.default.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateTokens: function updateTokens(tokens) {\n      return dispatch({ type: 'UPDATE_TOKENS', tokens: tokens });\n    }\n  };\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Exchange);\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"path\");\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// server.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d3b5c54652bc6f0cdd8f","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"react-bootstrap\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-bootstrap\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"react-qr-reader\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-qr-reader\"\n// module id = 5\n// module chunks = 0","import express from 'express';\nimport ssr from './ssr';\n\nconst app = express();\n\napp.set('view engine', 'ejs');\n\napp.use(express.static('public'));\n\napp.use('/merchant*', ssr);\n\napp.get('/', (req, res) => {\n  res.status(200).render('../views/home.ejs');\n});\n\napp.listen(process.env.PORT || 3000, () => {\n  console.log(process.env);\n  console.log(`Hello World listening on port ${process.env.PORT || 3000}!`);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./routes/index.js","import express from 'express';\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport { StaticRouter } from 'react-router';\nimport reducers from '../../client/src/reducers/index';\nimport App from '../../client/src/app';\nconst path = require('path');\n\nconst router = express.Router();\n\nrouter.get('*', (req, res) => {\n  /*\n    http://redux.js.org/docs/recipes/ServerRendering.html\n  */\n  const store = createStore(reducers);\n\n  store.dispatch({ type: 'ASSIGN_ADDRESS', address: process.env.ADDRESS });\n\n  const context = {};\n\n  const html = ReactDOMServer.renderToString(\n    <Provider store={store}>\n      <StaticRouter\n        location={req.originalUrl}\n        context={context}\n      >\n        <App onServer/>\n      </StaticRouter>\n    </Provider>,\n  );\n\n  const finalState = store.getState();\n\n  if (context.url) {\n    res.writeHead(301, {\n      Location: context.url,\n    });\n    res.end();\n  } else {\n    res.status(200).render('../views/index.ejs', {\n      html,\n      script: JSON.stringify(finalState),\n    });\n  }\n});\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/ssr.js","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"react-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router\"\n// module id = 10\n// module chunks = 0","import { combineReducers } from 'redux';\nimport balance from './balance';\nimport contract from './contract';\n\nconst rootReducer = combineReducers({\n  balance,\n  contract\n});\n\nexport default rootReducer;\n\n\n\n// WEBPACK FOOTER //\n// ../client/src/reducers/index.js","\nconst balance = (state = {balance: 0, tokens: 0}, action) => {\n  switch (action.type) {\n    case 'UPDATE_BALANCE':\n      return { ...action.payload }\n    default:\n        return state;\n  }\n};\n\nexport default balance;\n\n\n// WEBPACK FOOTER //\n// ../client/src/reducers/balance.js","\nconst balance = (state = {contract: {}, address: ''}, action) => {\n  switch (action.type) {\n    case 'ASSIGN_CONTRACT':\n      return { ...state, contract: action.contract };\n      break;\n      case 'ASSIGN_ADDRESS':\n      return { ...state, address: action.address };\n      break;\n    default:\n      return state;\n  }\n};\n  \n  export default balance;\n\n\n// WEBPACK FOOTER //\n// ../client/src/reducers/contract.js","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Route, Link, Switch, withRouter } from 'react-router-dom';\nimport { Nav, NavItem } from 'react-bootstrap';\n\nimport FrontPage from './containers/FrontPage';\nimport Redeem from './containers/Redeem';\nimport Topup from './containers/Topup';\nimport Exchange from './containers/Exchange';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.state = {\n      activeKey: 1,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    switch (nextProps.location.pathname) {\n      case '/merchant':\n        this.setState({ activeKey: 1 });\n        break;\n      case '/merchant/exchange':\n        this.setState({ activeKey: 2 });\n        break;\n      case '/merchant/redeem':\n        this.setState({ activeKey: 3 });\n        break;\n      case '/merchant/topup':\n        this.setState({ activeKey: 4 });\n        break;\n    }\n  }\n\n  componentDidMount() {\n    let web3Provider;\n    if (typeof web3 !== 'undefined') {\n      web3Provider = web3.currentProvider;\n    } else {\n      // If no injected web3 instance is detected, fallback to the tesstRPC\n      web3Provider = new Web3.providers.HttpProvider('https://rinkeby.infura.io/NLQOqKfqFUx5isRRyS4k');\n    }\n\n    window.web3 = new Web3(web3Provider);\n    \n    fetch('/Loyalty.json', {\n      method: 'GET',\n      headers: new Headers(),\n      mode: 'cors',\n      cache: 'default'\n    }).then((res) => res.json())\n    .then(async json => {\n      const contract = TruffleContract(json);\n      contract.setProvider(web3Provider);\n      let loyaltyContract = await contract.at(this.props.contract.address);\n      this.props.assignContract(loyaltyContract);\n      setInterval(() => {\n        loyaltyContract.merchantGetToken().then(data => {\n          window.web3.eth.getAccounts((error, accounts) => {\n            if (error) console.log(error);\n            window.web3.eth.getBalance(accounts[0], (err, result) => {\n              if (!err) {\n                const amount = web3.fromWei(result.toNumber(), \"ether\");\n                this.props.updateBalance({ balance: amount, tokens: parseInt(data) });\n                if (!window.web3.settings.defaultAccount)\n                  window.web3.settings.defaultAccount = accounts[0];\n              }\n            });\n          });\n        }).catch(err => console.log(err));\n      }, 1000);\n    });\n  }\n\n  handleSelect(selectedKey) {\n    this.setState({ activeKey: selectedKey });\n    switch (selectedKey) {\n      case 1:\n        this.props.history.push('/merchant');\n        break;\n      case 2:\n        this.props.history.push('/merchant/exchange');\n        break;\n      case 3:\n        this.props.history.push('/merchant/redeem');\n        break;\n      case 4:\n        this.props.history.push('/merchant/topup');\n        break;\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <img src={'/image/banner.png'}/>\n        <div style={{ padding: '100px 50px' }}>\n          <Nav bsStyle=\"pills\" activeKey={this.state.activeKey} onSelect={this.handleSelect} style={{ display: 'inline-block' }}>\n            <NavItem eventKey={1}>Issue Nekoins to User</NavItem>\n            <NavItem eventKey={3}>User Redeem</NavItem>\n          </Nav>\n          <Nav bsStyle=\"pills\" activeKey={this.state.activeKey} onSelect={this.handleSelect} style={{ float: 'right' }}>\n            <NavItem eventKey={4}>Topup Nekoins</NavItem>\n            <NavItem eventKey={2}>Exchange to Ethers</NavItem>\n          </Nav>\n          <Switch>\n            <Route exact path=\"/merchant\" component={FrontPage}/>\n            <Route path=\"/merchant/exchange\" component={Exchange}/>\n            <Route path=\"/merchant/redeem\" component={Redeem}/>\n            <Route path=\"/merchant/topup\" component={Topup}/>\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {...state};\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  assignContract: (contract) => dispatch({ type: 'ASSIGN_CONTRACT', contract }),\n  updateBalance: (payload) => dispatch({ type: 'UPDATE_BALANCE', payload }),\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\n\n\n// WEBPACK FOOTER //\n// ../client/src/app.js","module.exports = require(\"react-router-dom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router-dom\"\n// module id = 15\n// module chunks = 0","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { form, FormGroup, ControlLabel, FormControl, Button, Grid, Row, Col } from 'react-bootstrap';\n\nimport QrReader from 'react-qr-reader';\nimport QRCode  from 'qrcode.react';\n\nclass FrontPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.handleError = this.handleError.bind(this);\n    this.handleScan = this.handleScan.bind(this);\n    this.state = {\n      token: '',\n      scanningId: '',\n      generatedId: '',\n    };\n  }\n\n  handleError(err) {\n    console.log(err);\n  }\n\n  handleScan(data) {\n    if (!data)\n      return;\n    let uids = [], pwds = [];\n    data.split(',').forEach((element, index) => {\n        if (index % 2 === 0)\n          uids.push(parseInt(element));\n        else\n          pwds.push(parseInt(element));\n    });\n    this.setState({ scanningId: uids[0] });\n  }\n\n  render() {\n    return (\n      <div style={{ paddingLeft: 50, paddingRight: 50 }}>\n        <h1 style={{ fontSize: 30, paddingTop: 50 }}>You currently have {this.props.balance.tokens} Nekoins</h1>\n        <form style={{ padding: 20 }}>\n          <FormGroup controlId='token'>\n            <ControlLabel>Nekoins as Gift offered to Customers</ControlLabel>\n            <FormControl\n              type=\"phone\"\n              placeholder=\"Nekoins\"\n              style={{ fontSize: '2em' }}\n              value={this.state.token}\n              onChange={e => this.setState({ token: e.target.value.replace(/\\D/g, '') })} />\n          </FormGroup>\n        </form>\n        <Grid>\n          <Row style={{ position: 'relative' }}>\n            <Col md={6} xs={6} style={{ textAlign: 'center' }}>\n              <h3>Return customer</h3>\n              <QrReader\n                delay={300}\n                onError={this.handleError}\n                onScan={this.handleScan}\n                style={{ width: '80%', margin: 'auto' }}\n              />\n              <div style={{ paddingTop: 10, paddingBottom: 10 }}>User ID: {this.state.scanningId}</div>\n              <Button onClick={() => {\n                this.props.contract.updateUser(this.state.scanningId, parseInt(this.state.token), {\n                  from: window.web3.settings.defaultAccount,\n                  to: this.props.contract.address,\n                }).then(function(data){\n                  console.log(data);\n                });\n              }}>\n                Send {`${this.state.token}`} Nekoins to this account\n              </Button>\n            </Col>\n            <div style={{ position: 'absolute', left: '50%', height: '100%', paddingTop: 100, paddingBottom: 50 }}>\n              <div style={{ height: 150, borderLeft: 'dashed 2px black', width: 1 }}></div>\n              <div style={{ marginTop: 20, marginBottom: 20 }}>\n                <div style={{ position: 'relative', left: -5 }}>Or</div>\n              </div>\n              <div style={{ height: 150, borderLeft: 'dashed 2px black', width: 1  }}></div>\n            </div>\n            <Col md={6} xs={6} style={{ textAlign: 'center' }}>\n              <h3>Create new customer</h3>\n              {this.state.generatedId ? \n                <QRCode value={`${this.state.generatedId}`} size={444}/>:\n                <div style={{ width: 444, height: 444 }}/>\n              }\n              <FormControl\n                type=\"password\"\n                placeholder=\"Customer's password\"\n                onChange={e => this.setState({ password: e.target.value })}\n                style={{ marginBottom: 10, margin: '0px 20px' }}\n              />\n              <Button onClick={() => {\n                this.props.contract.createUser(\n                  parseInt(this.state.token),\n                  parseInt(this.state.password),\n                  Math.round(Math.random()*100000),\n                  {\n                  from: window.web3.settings.defaultAccount,\n                    to: this.props.contract.address,\n                  }\n                ).\n                  then((data) => {\n                    console.log(parseInt(data.logs[0].args.uid));\n                    this.setState({ generatedId: parseInt(data.logs[0].args.uid) });\n                  });   \n              }}>\n                Create new customer with {`${this.state.token}`} Nekoins\n              </Button>\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateTokens: (tokens) => dispatch({ type: 'UPDATE_TOKENS', tokens })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FrontPage);\n\n\n// WEBPACK FOOTER //\n// ../client/src/containers/FrontPage.js","module.exports = require(\"qrcode.react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"qrcode.react\"\n// module id = 17\n// module chunks = 0","import React from 'react';\nimport { connect } from 'react-redux';\nimport { form, FormGroup, ControlLabel, FormControl, Button, Grid, Row, Col } from 'react-bootstrap';\n\nimport QrReader from 'react-qr-reader';\n\nclass Redeem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleError = this.handleError.bind(this);\n    this.handleScan = this.handleScan.bind(this);\n    this.state = {\n      isProcessing: false,\n      token: ''\n    };\n  }\n\n  handleError(err) {\n    console.log(err);\n  }\n\n  handleScan(data) {\n    console.log(data, this.state.isProcessing);\n    if (this.state.isProcessing || !data)\n      return;\n    this.setState({ isProcessing: true });\n    let uids = [], pwds = [];\n    data.split(',').forEach((element, index) => {\n        if (index % 2 === 0)\n          uids.push(parseInt(element));\n        else\n          pwds.push(parseInt(element));\n    });\n    this.props.contract.useToken(uids, pwds, parseInt(this.state.token), {\n      from: window.web3.settings.defaultAccount,\n      to: this.props.contract.address,\n      gas: 300000,\n    })\n    .then((data) => {\n      this.setState({ isProcessing: false });\n    })\n    .catch((err) => {\n      console.log(err.message);\n      this.setState({ isProcessing: false });\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <h1 style={{ fontSize: 30, paddingTop: 50 }}>You currently have {this.props.balance.tokens} Nekoins</h1>\n        <form style={{ padding: 20 }}>\n        <FormGroup controlId='token'>\n          <ControlLabel>Redeem Gift Code From User</ControlLabel>\n          <FormControl\n            type=\"text\"\n            placeholder=\"Nekoins Value\"\n            value={this.state.token}\n            onChange={e => this.setState({ token: e.target.value.replace(/\\D/g, '') })}\n          />\n        </FormGroup>\n      </form>\n        <QrReader\n          delay={300}\n          onError={this.handleError}\n          onScan={this.handleScan}\n          style={{ width: '40%', margin: 'auto' }}\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateTokens: (tokens) => dispatch({ type: 'UPDATE_TOKENS', tokens })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Redeem);\n\n\n// WEBPACK FOOTER //\n// ../client/src/containers/Redeem.js","import React from 'react';\nimport { connect } from 'react-redux';\nimport { form, FormGroup, ControlLabel, FormControl, Button } from 'react-bootstrap';\n\nclass Topup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: '',\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <h1 style={{ fontSize: 30, paddingTop: 50 }}>You currently have {this.props.balance.tokens} Nekoins</h1>\n        <form style={{ padding: 20 }}>\n          <FormGroup controlId='token'>\n            <ControlLabel>Buy Nekoins for your Loyalty Program</ControlLabel>\n            <FormControl\n              type=\"text\"\n              placeholder=\"Nekoins\"\n              value={this.state.token}\n              onChange={e => this.setState({ token: e.target.value.replace(/\\D/g, '') })}\n              style={{ fontSize: '2em' }}\n            />\n          </FormGroup>\n          <Button onClick={() => {\n            window.web3.eth.sendTransaction(\n              {to: this.props.contract.address, value: window.web3.toWei(this.state.token / 10000, \"ether\") }, \n              (err, transactionHash) => {\n                console.log(transactionHash);\n              }\n            ); \n          }}>\n            Buy Now!\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateTokens: (tokens) => dispatch({ type: 'UPDATE_TOKENS', tokens })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Topup);\n\n\n// WEBPACK FOOTER //\n// ../client/src/containers/Topup.js","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { form, FormGroup, ControlLabel, FormControl, Button } from 'react-bootstrap';\n\nclass Exchange extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: '',\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <h1 style={{ fontSize: 30, paddingTop: 50 }}>You currently have {this.props.balance.tokens} Nekoins</h1>\n        <form style={{ padding: 20 }}>\n          <FormGroup controlId='token'>\n            <ControlLabel>Nekoins to exchange</ControlLabel>\n            <FormControl\n              type=\"text\"\n              placeholder=\"Nekoins\"\n              value={this.state.token}\n              onChange={e => this.setState({ token: e.target.value.replace(/\\D/g, '') })}\n              style={{ fontSize: '2em' }}\n            />\n          </FormGroup>\n          <Button onClick={() => {\n            this.props.contract.merchantRedeemToken(this.state.token, {\n              from: window.web3.settings.defaultAccount,\n              to: this.props.contract.address,\n              gas: 300000,\n            }).then(data => {\n              console.log(data);\n            }).catch(err => console.log(err));\n          }}>\n            Exchange\n          </Button>\n        </form>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    balance: state.balance,\n    contract: state.contract.contract\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateTokens: (tokens) => dispatch({ type: 'UPDATE_TOKENS', tokens })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Exchange);\n\n\n// WEBPACK FOOTER //\n// ../client/src/containers/Exchange.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 21\n// module chunks = 0"],"sourceRoot":""}